# Namecheap Domain Export ðŸ“¤

Export DNS records from Namecheap to standard BIND zone files with ease.

## Features

- **ðŸ“¥ Easy Export**: Extract DNS records from any Namecheap domain
- **ðŸ“„ BIND Format**: Industry-standard zone file output
- **ðŸ”Œ Flexible API**: Works with both Namecheap API and namecheap-api-filter
- **ðŸ”’ Secure**: Multiple authentication methods supported
- **âš¡ Fast**: Efficient API calls with minimal overhead
- **ðŸŽ¯ Simple CLI**: Intuitive command-line interface

## Quick Start

```bash
# Clone the repository
git clone https://github.com/allquixotic/namecheap-domain-export
cd namecheap-domain-export

# Build the tool
go build

# Export a domain
./namecheap-domain-export -domain example.com -output example.com.zone
```

## Installation

### Prerequisites
- Go 1.24 or later
- Namecheap API credentials or access to namecheap-api-filter

### Build from Source

```bash
go mod download
go build -o namecheap-domain-export
```

### Install with Go

```bash
go install github.com/allquixotic/namecheap-domain-export@latest
```

## Configuration

Configure using environment variables or command-line flags:

### Secure Credential Management

For production use, we recommend using **dotenvx** for secure credential management. See [DOTENVX_SETUP.md](DOTENVX_SETUP.md) for detailed instructions on:
- Encrypting your credentials
- Managing different configurations (direct API vs filter proxy)
- Production deployment best practices

### Environment Variables

| Variable | Description | Default |
|----------|-------------|---------|
| `NAMECHEAP_API_URL` | API endpoint URL | `https://api.namecheap.com/xml.response` |
| `NAMECHEAP_API_USER` | API username | - |
| `NAMECHEAP_API_KEY` | API key | - |
| `NAMECHEAP_CLIENT_IP` | Your whitelisted IP | - |

### Command-Line Flags

```bash
namecheap-domain-export [flags]

Flags:
  -domain string      Domain to export (required)
  -output string      Output file path (default: "{domain}.zone")
  -api-url string     API endpoint URL
  -api-user string    API username
  -api-key string     API key
  -client-ip string   Client IP address
  -format string      Output format (default: "bind")
  -verbose           Enable verbose output
  -help              Show help message
```

## Usage Examples

### Export with Direct API Access

```bash
# Using environment variables
export NAMECHEAP_API_USER="your-username"
export NAMECHEAP_API_KEY="your-api-key"
export NAMECHEAP_CLIENT_IP="203.0.113.1"

./namecheap-domain-export -domain example.com
```

### Export via namecheap-api-filter

```bash
# Point to your filter proxy
export NAMECHEAP_API_URL="http://localhost:8080/xml.response"
export NAMECHEAP_API_USER="your-auth-token"
export NAMECHEAP_API_KEY="your-auth-token"

./namecheap-domain-export -domain example.com -output /tmp/example.zone
```

### Export Multiple Domains

```bash
# Create a simple script
for domain in example.com test.org mysite.net; do
    ./namecheap-domain-export -domain "$domain" -output "zones/$domain.zone"
done
```

## Output Format

The tool generates standard BIND zone files:

```bind
; Zone file for example.com
; Generated by namecheap-domain-export
; Date: 2024-01-15 10:30:00 UTC

$ORIGIN example.com.
$TTL 3600

; SOA Record
@   IN  SOA ns1.example.com. admin.example.com. (
            2024011501  ; Serial
            7200        ; Refresh
            3600        ; Retry
            1209600     ; Expire
            3600 )      ; Minimum TTL

; Name Servers
@   IN  NS  ns1.namecheap.com.
@   IN  NS  ns2.namecheap.com.

; A Records
@       IN  A       192.0.2.1
www     IN  A       192.0.2.1
mail    IN  A       192.0.2.5

; CNAME Records
blog    IN  CNAME   www.example.com.
shop    IN  CNAME   shopify.example.com.

; MX Records
@       IN  MX  10  mail.example.com.
@       IN  MX  20  backup.mail.example.com.

; TXT Records
@       IN  TXT     "v=spf1 mx -all"
_dmarc  IN  TXT     "v=DMARC1; p=reject; rua=mailto:dmarc@example.com"
```

## Advanced Usage

### Custom Output Formats

While BIND is the default format, you can implement custom formatters:

```go
// Example: JSON output format
./namecheap-domain-export -domain example.com -format json
```

### Batch Processing

Process multiple domains from a file:

```bash
#!/bin/bash
while IFS= read -r domain; do
    echo "Exporting $domain..."
    ./namecheap-domain-export -domain "$domain" -output "exports/$domain.zone"
done < domains.txt
```

### Integration with DNS Tools

```bash
# Validate exported zone file
named-checkzone example.com example.com.zone

# Import to BIND
cp example.com.zone /var/named/
systemctl reload named
```

## Error Handling

The tool provides clear error messages:

```bash
# Missing credentials
Error: API credentials not provided. Set NAMECHEAP_API_USER and NAMECHEAP_API_KEY

# Invalid domain
Error: Domain 'invalid..domain' is not valid

# API errors
Error: API returned error 2011330: Domain not found in your account
```

## Development

### Project Structure

```
namecheap-domain-export/
â”œâ”€â”€ main.go                 # CLI entry point and implementation
â”œâ”€â”€ go.mod                  # Go module definition
â”œâ”€â”€ go.sum                  # Go module checksums
â”œâ”€â”€ README.md               # This documentation
â”œâ”€â”€ DOTENVX_SETUP.md       # Secure credential management guide
â”œâ”€â”€ CLAUDE.md              # Project specifications
â”œâ”€â”€ LICENSE                # MIT License
â””â”€â”€ namecheap-domain-export # Compiled binary
```

### Contributing

1. Fork the repository
2. Create a feature branch (`git checkout -b feature/amazing-feature`)
3. Commit your changes (`git commit -m 'Add amazing feature'`)
4. Push to the branch (`git push origin feature/amazing-feature`)
5. Open a Pull Request

## Use Cases

- **Backup**: Regular exports of DNS configurations
- **Migration**: Moving domains between providers
- **Audit**: Track DNS changes over time
- **Documentation**: Generate human-readable DNS documentation
- **Automation**: Integrate with CI/CD pipelines

## Troubleshooting

### Common Issues

1. **Authentication Failed**
   - Verify API credentials are correct
   - Check IP is whitelisted in Namecheap account

2. **Domain Not Found**
   - Ensure domain exists in your account
   - Check for typos in domain name

3. **Connection Errors**
   - Verify network connectivity
   - Check API endpoint URL
   - Ensure namecheap-api-filter is running (if used)

### Debug Mode

Enable verbose output for troubleshooting:

```bash
./namecheap-domain-export -domain example.com -verbose
```

## License

MIT License - see LICENSE file for details

## Support

- Issues: [GitHub Issues](https://github.com/allquixotic/namecheap-domain-export/issues)
- Documentation: [Wiki](https://github.com/allquixotic/namecheap-domain-export/wiki)

## Acknowledgments

- Built with the [Namecheap Go SDK v2](https://github.com/namecheap/go-namecheap-sdk/v2)
- Inspired by the need for simple DNS backup solutions

---

*This tool was generated using [Claude Code](https://claude.ai/code) with Claude Opus 4*